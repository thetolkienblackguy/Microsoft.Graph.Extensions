# Get-GraphServicePrincipalAppRoleAssignment.md

`Get-GraphServicePrincipalAppRoleAssignment` is a PowerShell function that retrieves all app role assignments for a service principal using the Microsoft Graph API.

## Synopsis

This function returns all of the app role assignments for a service principal.

## Syntax

```powershell
Get-GraphServicePrincipalAppRoleAssignment
  -ServicePrincipalId <guid>
  [-Recursive]

Get-GraphServicePrincipalAppRoleAssignment
  -AppId <guid>
  [-Recursive]
```

## Description

The `Get-GraphServicePrincipalAppRoleAssignment` function provides a way to retrieve app role assignments for a specified service principal. It can use either the Service Principal ID or the App ID to identify the service principal. The function also supports recursive retrieval of users who are members of groups that are assigned to the service principal.

## Parameters

- `-ServicePrincipalId <guid>`
  The ID of the service principal to get the app role assignments for. Alias: Id.

- `-AppId <guid>`
  The App ID of the service principal to get the app role assignments for.

- `-Recursive <switch>`
  If specified, it will return users that are members of groups that are members of the service principal. It will not return users that are nested within those groups by design.

## Examples

### Example 1: Get app role assignments using Service Principal ID
```powershell
Get-GraphServicePrincipalAppRoleAssignment -ServicePrincipalId 00000000-0000-0000-0000-000000000000
```

### Example 2: Get app role assignments using App ID
```powershell
Get-GraphServicePrincipalAppRoleAssignment -AppId 00000000-0000-0000-0000-000000000000
```

### Example 3: Get app role assignments recursively
```powershell
Get-GraphServicePrincipalAppRoleAssignment -ServicePrincipalId 00000000-0000-0000-0000-000000000000 -Recursive
```

## Notes

- This function uses custom classes (`GraphAppRoleTable` and `GraphRoleAssignmentPrincipalObject`) to process and format the output. Ensure these classes are available in your environment.
- When using the `-Recursive` switch, be aware that it only goes one level deep into group memberships.

---

*Disclaimer: This README was generated by Claude AI 3.5 Sonnet.*
